# api_yamdb
![example workflow](https://github.com/krtkv-alex/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

Проект **YaMDb** собирает **отзывы (Review)** пользователей на **произведения (Titles)**. Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список **категорий (Category)** может быть расширен администратором (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.
Произведению может быть присвоен жанр (Genre) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

## Шаблон наполнения env-файла:
SECRET_KEY - ключ к защите подписанных данных;
DB_ENGINE - указываем, что работаем с postgresql;
DB_NAME - имя базы данных;
POSTGRES_USER - логин для подключения к базе данных;
POSTGRES_PASSWORD - пароль для подключения к БД;
DB_HOST=db - название сервиса (контейнера);
DB_PORT=5432 - порт для подключения к БД.

## Технологии
Python 3.7, Django 2.2, DRF, JWT

## Описание команд для запуска приложения в контейнерах:
Для запуск приложения в контейнерах используйте команду:
```docker-compose up```
После внесения изменений в приложении используйте команду:
```docker-compose up -d --build```
После сборки в контейнере web нужно выполнить миграции, создать суперпользователя и собрать статику:
```docker-compose exec web python manage.py migrate```
```docker-compose exec web python manage.py createsuperuser```
```docker-compose exec web python manage.py collectstatic --no-input```
Теперь проект доступен по адресу ```http://localhost/```.
Используейте команду ```docker-compose down -v``` чтобы остановить контекнеры и удалить все зависимости, но при этом оставить образы.
## Описание команды для заполнения базы данными:
Создать пустую базу данных с именем postgres:
```sudo -u postgres psql -c 'create database postgres```
Загрузить в неё данные из дампа: 
```sudo -u postgres psql -d yatube2 -f fixtures.dump```
